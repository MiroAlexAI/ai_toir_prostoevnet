# Функция Перевода Статей

## Описание

Функция автоматического перевода статей с английского на русский язык использует OpenRouter AI с моделью `zhipu-ai/glm-4-9b-chat:free`.

## Как использовать

1. **Вставьте URL статьи** в поле ввода
2. **Нажмите кнопку "Перевод"** (зеленая кнопка)
3. **Дождитесь результата** - перевод появится в блоке "Результат"

## Технические детали

### API Endpoint
- **URL:** `/api/translate`
- **Метод:** POST
- **Параметры:**
  - `content` (string) - текст статьи для перевода
  - `title` (string, optional) - заголовок статьи

### Процесс работы

1. Приложение сначала парсит статью через `/api/parse`
2. Извлеченный контент отправляется в `/api/translate`
3. API делает запрос к OpenRouter AI
4. Переведенный текст отображается пользователю

### Модель AI

- **Провайдер:** OpenRouter AI
- **Модель:** `zhipu-ai/glm-4-9b-chat:free`
- **Параметры:**
  - Temperature: 0.3 (для более точного перевода)
  - Max tokens: 4000

## Настройка

### Требуемые переменные окружения

Создайте файл `.env.local` в корне проекта:

```env
OPENROUTER_API_KEY=your_api_key_here
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### Получение API ключа

1. Зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/)
2. Перейдите в раздел API Keys
3. Создайте новый ключ
4. Скопируйте ключ в `.env.local`

## Обработка ошибок

Приложение обрабатывает следующие ошибки:

- **Отсутствие API ключа** - "OPENROUTER_API_KEY не настроен в .env.local"
- **Ошибка API** - "Ошибка при обращении к OpenRouter API"
- **Ошибка парсинга** - "Ошибка при парсинге статьи"

## Пример использования

```javascript
// Пример запроса к API
const response = await fetch('/api/translate', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({ 
    content: "Article text here...",
    title: "Article Title"
  }),
});

const data = await response.json();
console.log(data.translation); // Переведенный текст
```

## Ограничения

- Максимальная длина контента для перевода: ~4000 токенов
- Бесплатная модель может иметь ограничения по количеству запросов
- Время ответа зависит от длины текста и загрузки API

## Улучшения (TODO)

- [ ] Добавить выбор языка перевода
- [ ] Добавить выбор модели AI
- [ ] Кэширование переводов
- [ ] Индикатор прогресса перевода
- [ ] Сохранение истории переводов
